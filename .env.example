# .env.example - Environment variables template
# Copy this file to .env for local development and fill in secrets.
# DO NOT COMMIT .env file to version control.

# --- Application Settings ---
APP_ENV=development # development, production, test
LOG_LEVEL=INFO # DEBUG, INFO, WARNING, ERROR

# --- FastAPI / Uvicorn ---
API_HOST=0.0.0.0
API_PORT=8000

# --- Database (PostgreSQL) ---
POSTGRES_USER=admin
POSTGRES_PASSWORD=supersecretpassword # CHANGE THIS!
POSTGRES_DB=subappdb
POSTGRES_HOST=db # Service name in docker-compose
POSTGRES_PORT=5432
DATABASE_URL=postgresql+psycopg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# --- Cache / Broker (Redis) ---
REDIS_HOST=redis # Service name in docker-compose
REDIS_PORT=6379
REDIS_DB_CELERY_BROKER=0
REDIS_DB_CELERY_BACKEND=1
REDIS_DB_PUBSUB=2
CELERY_BROKER_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB_CELERY_BROKER}
CELERY_RESULT_BACKEND=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB_CELERY_BACKEND}
REDIS_PUBSUB_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB_PUBSUB}

# --- Celery Worker ---
DOWNLOAD_SCRIPT_PATH=/app/scripts/sub_downloader.py # Adjust if script location differs
JOB_TIMEOUT_SEC=900 # 15 minutes
JOB_MAX_RETRIES=2
ALLOWED_MEDIA_FOLDERS=/media/movies,/media/tv # Comma-separated list of allowed base paths

# --- Authentication (FastAPI Users / JWT) ---
# Generate a strong secret key, e.g., using: openssl rand -hex 32
JWT_SECRET_KEY=a_very_long_and_super_secret_key_that_you_must_change_32_chars # CHANGE THIS!
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
# Toggle self-service registration (true/false)
OPEN_SIGNUP=true

# --- Frontend ---
# Base URL for the backend API, used by the frontend
VITE_API_BASE_URL=https://localhost/api # Use Caddy's proxied URL

# --- Caddy (Optional - for use in Caddyfile templates) ---
# SITE_DOMAIN=localhost # or your production domain

# --- Testing (Specific overrides in pytest.ini or .env.test) ---
# TEST_DATABASE_URL=...