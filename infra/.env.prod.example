# Production Environment Configuration Template
# Copy this file to .env.prod and fill in the values

# --- General Application ---
APP_ENV=production
DEBUG=False
# Domain name for Caddy (e.g., subro.example.com)
DOMAIN_NAME=example.com
# Admin email for Caddy (Let's Encrypt)
ACME_EMAIL=admin@example.com

# --- Security ---
# Generate valid tokens
FIRST_SUPERUSER_EMAIL=admin@example.com
FIRST_SUPERUSER_PASSWORD=CHANGE_ME_SUPERUSER_PASSWORD
SETUP_TOKEN=CHANGE_ME_SETUP_TOKEN
VITE_SETUP_TOKEN=CHANGE_ME_SETUP_TOKEN  # Must match SETUP_TOKEN for frontend

# --- Database ---
POSTGRES_SERVER=db
POSTGRES_PORT=5432
POSTGRES_DB=subappdb
POSTGRES_USER=subapp_user
POSTGRES_PASSWORD=CHANGE_ME_DB_PASSWORD

# --- Redis & Celery ---
CELERY_BROKER_URL="redis://redis:6379/0"
CELERY_RESULT_BACKEND="redis://redis:6379/1"
REDIS_PUBSUB_URL="redis://redis:6379/2"

# --- Frontend ---
# URL where the API is reachable from the user's browser (usually same as domain)
VITE_API_BASE_URL=https://${DOMAIN_NAME}/api/v1
# WebSocket Base URL
VITE_WS_BASE_URL=wss://${DOMAIN_NAME}/api/v1

# --- Security Hardening ---
# JSON array of allowed origins
BACKEND_CORS_ORIGINS=["https://${DOMAIN_NAME}"]

# --- Job Settings ---
DOWNLOAD_SCRIPT_PATH="/app/scripts/sub_downloader.py"
JOB_TIMEOUT_SEC=900
JOB_MAX_RETRIES=2
SUBPROCESS_TIMEOUT_SECONDS=600
ALLOWED_MEDIA_FOLDERS=["/mnt/sata0/Media"]

# --- Backup Config ---
BACKUP_DIR=/backups
BACKUP_RETENTION_DAYS=7
BACKUP_ENCRYPTION_KEY=CHANGE_ME_BACKUP_ENCRYPTION_KEY

# --- Authentication (JWT) ---
JWT_SECRET_KEY=CHANGE_ME_JWT_SECRET_KEY
JWT_REFRESH_SECRET_KEY=CHANGE_ME_JWT_REFRESH_SECRET_KEY
# Data-at-rest encryption keys (comma-separated). Keep stable across JWT rotations.
DATA_ENCRYPTION_KEYS=CHANGE_ME_DATA_ENCRYPTION_KEY
# Optional: override reset/verification token secrets
RESET_PASSWORD_TOKEN_SECRET=CHANGE_ME_RESET_PASSWORD_TOKEN_SECRET
VERIFICATION_TOKEN_SECRET=CHANGE_ME_VERIFICATION_TOKEN_SECRET
API_KEY_PEPPER=CHANGE_ME_API_KEY_PEPPER
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
COOKIE_SECURE=True

# --- External Services API Keys ---
# JSON array of DeepL keys
DEEPL_API_KEYS=["CHANGE_ME_DEEPL_KEY_1:fx","CHANGE_ME_DEEPL_KEY_2:fx"]
OMDB_API_KEY=CHANGE_ME_OMDB_API_KEY
TMDB_API_KEY=CHANGE_ME_TMDB_API_KEY
OPENSUBTITLES_API_KEY=CHANGE_ME_OPENSUBTITLES_API_KEY

# --- OpenSubtitles Credentials ---
OPENSUBTITLES_USERNAME=CHANGE_ME_OPENSUBTITLES_USERNAME
OPENSUBTITLES_PASSWORD=CHANGE_ME_OPENSUBTITLES_PASSWORD

# --- Google Cloud ---
GOOGLE_PROJECT_ID=CHANGE_ME_GOOGLE_PROJECT_ID
GOOGLE_CREDENTIALS_PATH=/app/secrets/google-api-config.json

# --- qBittorrent ---
QBITTORRENT_HOST=localhost
QBITTORRENT_PORT=8080
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=CHANGE_ME_QBITTORRENT_PASSWORD

# --- Mailgun Configuration ---
MAILGUN_API_KEY=CHANGE_ME_MAILGUN_API_KEY
MAILGUN_DOMAIN=CHANGE_ME_MAILGUN_DOMAIN
MAILGUN_FROM_EMAIL=postmaster@CHANGE_ME_MAILGUN_DOMAIN
MAILGUN_FROM_NAME=Subro Web
FRONTEND_URL=https://${DOMAIN_NAME}

# --- Security & API Docs ---
# Default is disabled (None) in production for security.
# Set these to non-guessable paths if you need them enabled.
OPENAPI_URL=/api/v1/change-me-openapi.json
DOCS_URL=/api/v1/change-me-docs
HEALTHZ_URL=/api/v1/change-me-health
REDOC_URL=

# --- User Agent Settings ---
USER_AGENT_APP_NAME=Subro-Web-Downloader

# --- Webhook Settings ---
SUBRO_API_BASE_URL=https://secure.go.ro/api/v1
SUBRO_API_KEY=CHANGE_ME_SUBRO_API_KEY
PLEX_BASE_URL=https://your-plex-host:32400
PLEX_TOKEN=CHANGE_ME_PLEX_TOKEN
PLEX_SECTION_IDS=1,2
PLEX_SECTION_TOKENS=CHANGE_ME_PLEX_TOKEN_1,CHANGE_ME_PLEX_TOKEN_2
