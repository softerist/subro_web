# # backend/.env.example - Environment variables template
# backend/.env.example - Environment variables template
# Copy this file to .env for local development and fill in secrets.
# DO NOT COMMIT .env file to version control.

# --- General Application Settings ---
DEBUG=True # Set to False in production
# APP_NAME and APP_VERSION are set as defaults in config.py

# --- Database (PostgreSQL) ---
# Pydantic settings (config.py) will use DATABASE_URL if set,
# otherwise it constructs from these individual parts.
# For local Docker Compose, using individual parts is often clearer.
# Ensure these match your docker-compose service names and credentials.
POSTGRES_SERVER=db
POSTGRES_USER=admin # Corresponds to POSTGRES_USER in docker-compose
POSTGRES_PASSWORD=supersecretpassword # Corresponds to POSTGRES_PASSWORD in docker-compose. CHANGE THIS!
POSTGRES_DB=subappdb # Corresponds to POSTGRES_DB in docker-compose
POSTGRES_PORT=5432

# Optional: Full DATABASE_URL (takes precedence if uncommented and defined in config.py as DATABASE_URL_ENV).
# Pydantic expects format: postgresql://user:password@host:port/dbname
# The asyncpg driver part ('+asyncpg') is added automatically by config.py's ASYNC_DATABASE_URI property.
DATABASE_URL="postgresql+asyncpg://admin:Pa44w0rd@db:5432/subappdb"

# --- Celery & Redis (Chapter 3) ---
# These URLs are directly read by Pydantic's Settings class.
# Defaults in config.py point to 'redis' service on standard port with different DB numbers.
# You can override them here if needed (e.g., different host, port, or DB numbers).
CELERY_BROKER_URL="redis://redis:6379/0"
CELERY_RESULT_BACKEND="redis://redis:6379/1"
REDIS_PUBSUB_URL="redis://redis:6379/2" # For real-time log streaming

# --- Job Runner Settings (Chapter 3) ---
DOWNLOAD_SCRIPT_PATH="/app/scripts/sub_downloader.py" # Path inside the worker container
JOB_TIMEOUT_SEC=900
JOB_MAX_RETRIES=2
ALLOWED_MEDIA_FOLDERS_ENV="/media/movies,/media/tvshows" # Example: comma-separated

# --- Authentication (JWT for FastAPI Users & Custom Refresh) ---
# Generate a strong 32-byte hex secret using: openssl rand -hex 32
# JWT_SECRET_KEY is aliased to SECRET_KEY in config.py (used by fastapi-users)
JWT_SECRET_KEY="change_this_to_a_very_strong_random_32_hex_secret_for_access_tokens"
JWT_REFRESH_SECRET_KEY="change_this_to_another_very_strong_random_32_hex_secret_for_refresh_tokens"
# ALGORITHM is set as default "HS256" in config.py
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
OPEN_SIGNUP=True # Toggle self-service registration (true/false)

# --- CORS Origins ---
# A JSON string array of allowed origins for frontend requests.
# Example: '["http://localhost:5173","https://your.domain.com"]'
# For local dev: Vite dev server, Caddy local proxy
BACKEND_CORS_ORIGINS_ENV='["http://localhost:5173", "https://localhost", "http://127.0.0.1:5173"]'

# --- Frontend (Informational - Used during frontend build/runtime via Vite's import.meta.env) ---
# Base URL for the backend API, injected into the frontend build
# Example for Vite: VITE_API_BASE_URL=https://localhost/api
# Ensure your frontend setup reads this (e.g., VITE_API_BASE_URL in frontend/.env)

# --- Caddy (Informational - Caddyfile might use environment variables) ---
# Example: SITE_DOMAIN=localhost (if your Caddyfile uses {$SITE_DOMAIN})

# --- Cookie Settings ---
COOKIE_SECURE=False

# --- Subtitle Tool API Keys ---
OMDB_API_KEY=change_me
TMDB_API_KEY=change_me
OPENSUBTITLES_API_KEY=change_me
# JSON array of keys
DEEPL_API_KEYS='["key1:fx","key2:fx"]'

# --- OpenSubtitles Credentials ---
OPENSUBTITLES_USERNAME=change_me
OPENSUBTITLES_PASSWORD=change_me

# --- qBittorrent Settings ---
QBITTORRENT_HOST=127.0.0.1
QBITTORRENT_PORT=8080
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=adminadmin

# --- Google Cloud Translate Settings ---
GOOGLE_PROJECT_ID=change_me
GOOGLE_CREDENTIALS_PATH=/app/secrets/google-api-config.json

# --- Translation Quotas ---
DEEPL_CHARACTER_QUOTA=500000
GOOGLE_CHARACTER_QUOTA=500000

# --- Sync Tool Paths ---
FFSUBSYNC_PATH=ffsubsync
ALASS_CLI_PATH=/usr/local/bin/alass-cli
SUP2SRT_PATH=/usr/local/bin/sup2srt

# --- Other Subtitle Settings ---
NETWORK_MAX_RETRIES=5
NETWORK_BACKOFF_FACTOR=5
FUZZY_MATCH_THRESHOLD=80
SUBTITLE_SYNC_OFFSET_THRESHOLD=1
FFSUBSYNC_CHECK_TIMEOUT=1000
FFSUBSYNC_TIMEOUT=600
ALASS_TIMEOUT=600
