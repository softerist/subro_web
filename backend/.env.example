# # backend/.env.example - Environment variables template
# # backend/.env.example - Environment variables template
# backend/.env.example - Environment variables template
# Copy this file to .env for local development and fill in secrets.
# DO NOT COMMIT .env file to version control.

# --- General Application Settings ---
DEBUG=True # Set to False in production
FIRST_SUPERUSER_EMAIL=admin@example.com
FIRST_SUPERUSER_PASSWORD=CHANGE_ME_SUPERUSER_PASSWORD
SETUP_TOKEN=CHANGE_ME_SETUP_TOKEN
# SETUP_TOKEN=change_this_setup_token # Required in production to complete /setup
# APP_NAME and APP_VERSION are set as defaults in config.py

# --- Database (PostgreSQL) ---
# Pydantic settings (config.py) will use DATABASE_URL if set,
# otherwise it constructs from these individual parts.
# For local Docker Compose, using individual parts is often clearer.
# Ensure these match your docker-compose service names and credentials.
POSTGRES_SERVER=db
POSTGRES_USER=admin # Corresponds to POSTGRES_USER in docker-compose
POSTGRES_PASSWORD=CHANGE_ME_DB_PASSWORD # Corresponds to POSTGRES_PASSWORD in docker-compose. CHANGE THIS!
POSTGRES_DB=subappdb # Corresponds to POSTGRES_DB in docker-compose
POSTGRES_PORT=5432

# Optional: Full DATABASE_URL (takes precedence if uncommented and defined in config.py as DATABASE_URL_ENV).
# Pydantic expects format: postgresql://user:password@host:port/dbname
# The asyncpg driver part ('+asyncpg') is added automatically by config.py's ASYNC_DATABASE_URI property.
DATABASE_URL="postgresql+asyncpg://admin:CHANGE_ME_DB_PASSWORD@db:5432/subappdb"

# --- Celery & Redis (Chapter 3) ---
# These URLs are directly read by Pydantic's Settings class.
# Defaults in config.py point to 'redis' service on standard port with different DB numbers.
# You can override them here if needed (e.g., different host, port, or DB numbers).
CELERY_BROKER_URL="redis://redis:6379/0"
CELERY_RESULT_BACKEND="redis://redis:6379/1"
REDIS_PUBSUB_URL="redis://redis:6379/2" # For real-time log streaming
REDIS_HOST=localhost
REDIS_PORT=6379

# --- Job Runner Settings (Chapter 3) ---
DOWNLOAD_SCRIPT_PATH="/app/scripts/sub_downloader.py" # Path inside the worker container
JOB_TIMEOUT_SEC=900
JOB_MAX_RETRIES=2
SUBPROCESS_TIMEOUT_SECONDS=600
ALLOWED_MEDIA_FOLDERS="/media/movies,/media/tvshows" # Example: comma-separated
ALLOWED_MEDIA_FOLDERS_ENV="/media/movies,/media/tvshows"

# --- Authentication (JWT for FastAPI Users & Custom Refresh) ---
# Generate a strong 32-byte hex secret using: openssl rand -hex 32
# JWT_SECRET_KEY is used for JWT signing (SECRET_KEY is also accepted)
JWT_SECRET_KEY="CHANGE_ME_JWT_SECRET_KEY"
JWT_REFRESH_SECRET_KEY="CHANGE_ME_JWT_REFRESH_SECRET_KEY"
# Data-at-rest encryption keys (comma-separated). Keep stable across JWT rotations.
DATA_ENCRYPTION_KEYS="CHANGE_ME_DATA_ENCRYPTION_KEY"
# Optional: override reset/verification token secrets
RESET_PASSWORD_TOKEN_SECRET="CHANGE_ME_RESET_PASSWORD_TOKEN_SECRET"
VERIFICATION_TOKEN_SECRET="CHANGE_ME_VERIFICATION_TOKEN_SECRET"
# Generate a strong random value; used to HMAC API keys at rest
API_KEY_PEPPER="CHANGE_ME_API_KEY_PEPPER"
# ALGORITHM is set as default "HS256" in config.py
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7
OPEN_SIGNUP=True # Toggle self-service registration (true/false)
COOKIE_SECURE=False

# --- CORS Origins ---
# A JSON string array of allowed origins for frontend requests.
# Example: '["http://localhost:5173","https://your.domain.com"]'
# For local dev: Vite dev server, Caddy local proxy
BACKEND_CORS_ORIGINS='["http://localhost:5173", "https://localhost", "http://127.0.0.1:5173"]'
BACKEND_CORS_ORIGINS_ENV='["http://localhost:5173", "https://localhost", "http://127.0.0.1:5173"]'
# --- External API Keys ---
DEEPL_API_KEYS=["CHANGE_ME_DEEPL_KEY_1:fx","CHANGE_ME_DEEPL_KEY_2:fx"]
OMDB_API_KEY=CHANGE_ME_OMDB_API_KEY
TMDB_API_KEY=CHANGE_ME_TMDB_API_KEY
OPENSUBTITLES_API_KEY=CHANGE_ME_OPENSUBTITLES_API_KEY
OPENSUBTITLES_USERNAME=CHANGE_ME_OPENSUBTITLES_USERNAME
OPENSUBTITLES_PASSWORD=CHANGE_ME_OPENSUBTITLES_PASSWORD
QBITTORRENT_HOST=127.0.0.1
QBITTORRENT_PORT=8080
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=CHANGE_ME_QBITTORRENT_PASSWORD

# --- Google Cloud Translate Settings ---
GOOGLE_PROJECT_ID=CHANGE_ME_GOOGLE_PROJECT_ID
GOOGLE_CREDENTIALS_PATH=/app/secrets/google-api-config.json

# --- Translation Quotas ---
DEEPL_CHARACTER_QUOTA=500000
GOOGLE_CHARACTER_QUOTA=500000

# --- Sync Tool Paths ---
FFSUBSYNC_PATH=ffsubsync
ALASS_CLI_PATH=/usr/local/bin/alass-cli
SUP2SRT_PATH=/usr/local/bin/sup2srt

# --- Other Subtitle Settings ---
NETWORK_MAX_RETRIES=5
NETWORK_BACKOFF_FACTOR=5
FUZZY_MATCH_THRESHOLD=80
SUBTITLE_SYNC_OFFSET_THRESHOLD=1
FFSUBSYNC_CHECK_TIMEOUT=1000
FFSUBSYNC_TIMEOUT=600
ALASS_TIMEOUT=600
