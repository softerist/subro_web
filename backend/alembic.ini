# A generic Alembic configuration file.
# Lines starting with "#" or ";" are comments.

[alembic]
# path to migration scripts relative to the alembic.ini file.
# This should point to the directory containing env.py and the versions/ subdirectory.
# Assuming alembic.ini is in your project root (e.g., backend/), and your Alembic
# scripts are in backend/alembic/
script_location = alembic

# template for migration file names, e.g. "%%(rev)s_%%(slug)s.py"
file_template = %%(rev)s_%%(slug)s

# sys.path path, will be prepended to sys.path if present.
# Useful if your application modules are not directly on PYTHONPATH.
# If your alembic/env.py needs to import 'app.core.config' or 'app.db.session',
# ensure the 'backend' directory (or wherever 'app' lives) is discoverable.
# Example: If alembic.ini is in 'backend/', and 'app' is 'backend/app/',
# then '.' (meaning 'backend/') should be sufficient if env.py uses relative imports
# or if the module structure allows direct import like 'from app.core.config import settings'.
# If alembic.ini is at the project root and alembic scripts are in ./alembic,
# you might need 'prepend_sys_path = .' to allow 'from app...'
# prepend_sys_path = . # Uncomment and adjust if 'app' module is not found by env.py

# timezone for generated revision files (leave blank for UTC)
# timezone =

# max length of characters to truncate from version names
# truncate_slug_length = 40

# set to 'true' to run the environment script unconditionally
# output_buffer = sys.stdout


# --- Database URL Configuration ---
#
# IMPORTANT:
# The `sqlalchemy.url` setting in this file is typically used by Alembic to connect
# to the database. However, your `alembic/env.py` script is likely configured
# to dynamically fetch the database URL from your application's settings
# (e.g., `app.core.config.settings.SYNC_DATABASE_URI`).
#
# This dynamic approach is PREFERRED because it ensures Alembic uses the exact
# same database connection details as your application, reducing inconsistencies.
#
# OPTION 1 (Recommended - Dynamic URL from env.py):
#   Leave `sqlalchemy.url` commented out or remove it.
#   Ensure `alembic/env.py` correctly imports your settings and sets the URL.
#
# sqlalchemy.url = # Intentionally left blank or commented out to prioritize env.py logic

# OPTION 2 (Fallback or Simpler Setups - Static URL):
#   If you prefer to define the URL statically here (e.g., for very simple projects
#   or if env.py is not set up to fetch it dynamically), uncomment and set it below.
#   Alembic requires a SYNCHRONOUS database driver for its operations.
#   Example for PostgreSQL (using psycopg2, the default sync driver if not specified):
#   sqlalchemy.url = postgresql://admin:Pa44w0rd@db:5432/subappdb
#
#   If you use this static URL, ensure your `alembic/env.py` is adjusted
#   to use `config.get_main_option("sqlalchemy.url")` if it's not already.

# --- Logging Configuration ---
# (Your existing logging configuration seems standard and fine)
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
# Set to INFO to see SQL DDL executed by Alembic, DEBUG for more verbosity.
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
# Set to DEBUG to see more Alembic operational details.
level = DEBUG
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
# Handlers should usually be NOTSET, letting logger levels control output.
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S

# --- Custom Section for Application Settings (Optional) ---
# You can add custom key-value pairs here if your env.py script needs them.
# For example, if env.py needs to know the application's root path to correctly
# set up sys.path for importing application modules.
#
# [my_app_settings]
# app_root = .
#
# Then in env.py, you could access it via:
# app_root_path = context.config.get_section_option("my_app_settings", "app_root")
